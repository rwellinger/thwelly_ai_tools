flowchart TB
    subgraph PRESENTATION["ðŸ–¥ï¸ Presentation Layer"]
        direction LR
        IMG_GEN[ðŸ–¼ï¸ Image Generator]
        SONG_GEN[ðŸŽµ Song Generator]
        IMG_VIEW[ðŸ‘ï¸ Image View]
        SONG_VIEW[ðŸŽ§ Song View]
        PROFILE[ðŸ‘¤ Profile]
        TEMPLATES[ðŸ“ Templates]
    end

    subgraph COMPONENT["ðŸ§© Component Layer"]
        direction LR
        HEADER[ðŸ“± Header]
        FOOTER[ðŸ“± Footer]
        DETAIL_PANEL[ðŸ“‹ Detail Panel]
        AUDIO_PLAYER[ðŸŽµ Audio Player]
        PROGRESS[â³ Progress Overlay]
    end

    subgraph SERVICE["âš™ï¸ Service Layer"]
        direction LR
        API_SVC[ðŸŒ API Services]
        DATA_SVC[ðŸ’¾ Data Services]
        NOTIFY_SVC[ðŸ”” Notification]
        CONFIG_SVC[âš™ï¸ Config]
    end

    subgraph INFRASTRUCTURE["ðŸ› ï¸ Infrastructure Layer"]
        direction LR
        MODELS[ðŸ“Š Models]
        PIPES[ðŸ”„ Pipes]
        GUARDS[ðŸ›¡ï¸ Guards]
        INTERCEPTORS[ðŸ”— Interceptors]
        AUTH[ðŸ” Auth]
    end

    subgraph EXTERNAL["ðŸŒ External Systems"]
        direction LR
        BACKEND[ðŸ–¥ï¸ aiproxysrv API]
        BUILD[ðŸ“¦ Production Build]
    end

    %% Layer Dependencies
    PRESENTATION --> COMPONENT
    COMPONENT --> SERVICE
    SERVICE --> INFRASTRUCTURE
    SERVICE --> EXTERNAL

    %% Styling
    classDef presentationStyle fill:#E8F5E8,stroke:#4CAF50,stroke-width:2px
    classDef componentStyle fill:#E3F2FD,stroke:#2196F3,stroke-width:2px
    classDef serviceStyle fill:#FFF3E0,stroke:#FF9800,stroke-width:2px
    classDef infrastructureStyle fill:#FCE4EC,stroke:#E91E63,stroke-width:2px
    classDef externalStyle fill:#F3E5F5,stroke:#9C27B0,stroke-width:2px

    class IMG_GEN,SONG_GEN,IMG_VIEW,SONG_VIEW,PROFILE,TEMPLATES presentationStyle
    class HEADER,FOOTER,DETAIL_PANEL,AUDIO_PLAYER,PROGRESS componentStyle
    class API_SVC,DATA_SVC,NOTIFY_SVC,CONFIG_SVC serviceStyle
    class MODELS,PIPES,GUARDS,INTERCEPTORS,AUTH infrastructureStyle
    class BACKEND,BUILD externalStyle