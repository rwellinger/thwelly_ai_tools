<div class="music-style-chooser-modal">
  <h2 mat-dialog-title>
    <i class="fas fa-music"></i>
    Music Style Chooser
  </h2>

  <mat-dialog-content class="dialog-content">
    <div class="style-chooser-container">

      <!-- Selection Summary -->
      <div class="selection-summary" *ngIf="config.selectedStyles.length > 0 || config.selectedThemes.length > 0 || config.selectedInstruments.length > 0">
        <small class="summary-label">{{ getSelectionSummary() }}</small>
      </div>

      <!-- Styles Section -->
      <div class="category-section">
        <h3 class="category-title">
          <i class="fas fa-music"></i>
          <span>STYLES (select multiple)</span>
        </h3>

        <div class="tag-grid">
          <button
            *ngFor="let style of availableStyles"
            type="button"
            class="tag-button"
            [class.selected]="isStyleSelected(style)"
            (click)="toggleStyle(style)">
            {{ style }}
            <span class="checkmark" *ngIf="isStyleSelected(style)">✓</span>
          </button>
        </div>
      </div>

      <!-- Instruments Section -->
      <div class="category-section">
        <h3 class="category-title">
          <i class="fas fa-guitar"></i>
          <span>INSTRUMENTS (select multiple)</span>
        </h3>

        <div class="tag-grid">
          <button
            *ngFor="let instrument of availableInstruments"
            type="button"
            class="tag-button"
            [class.selected]="isInstrumentSelected(instrument)"
            (click)="toggleInstrument(instrument)">
            {{ instrument }}
            <span class="checkmark" *ngIf="isInstrumentSelected(instrument)">✓</span>
          </button>
        </div>
      </div>

      <!-- Themes Section -->
      <div class="category-section">
        <h3 class="category-title">
          <i class="fas fa-palette"></i>
          <span>THEMES (select multiple)</span>
        </h3>

        <div class="tag-grid">
          <button
            *ngFor="let theme of availableThemes"
            type="button"
            class="tag-button"
            [class.selected]="isThemeSelected(theme)"
            (click)="toggleTheme(theme)">
            {{ theme }}
            <span class="checkmark" *ngIf="isThemeSelected(theme)">✓</span>
          </button>
        </div>
      </div>

      <!-- Preview Section -->
      <div class="preview-section">
        <h4 class="preview-title">
          <i class="fas fa-eye"></i>
          Preview
        </h4>
        <div class="preview-text">
          {{ getPreviewText() }}
        </div>
      </div>

    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <div class="dialog-actions">
      <button
        type="button"
        mat-button
        class="reset-btn"
        (click)="reset()"
        title="Reset all selections">
        <i class="fas fa-undo"></i>
        Reset
      </button>

      <div class="action-buttons">
        <button
          type="button"
          mat-button
          (click)="cancel()">
          Cancel
        </button>

        <button
          type="button"
          mat-raised-button
          color="primary"
          (click)="save()">
          <i class="fas fa-check"></i>
          Apply Styles
        </button>
      </div>
    </div>
  </mat-dialog-actions>
</div>